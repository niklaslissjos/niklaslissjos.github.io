<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Niklas Lissjos</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #0f0f0f;
            color: #f0f0f0;
            line-height: 1.6;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-end;
            position: relative;
            overflow: hidden;
        }
        #content {
            padding: 20px;
            text-align: right;
            position: relative;
            z-index: 2;
        }
        h1 {
            margin-bottom: 10px;
        }
        a {
            color: #ff6a00;
        }
        .glitch {
            position: absolute;
            background: #f0f0f0;
            width: 100%;
            height: 2px;
            opacity: 0.2;
            animation: glitch-animation 0.2s linear;
        }
        .glitch-intense {
            height: 4px;
            opacity: 0.4;
            box-shadow: 0 0 10px rgba(240, 240, 240, 0.5);
        }
        @keyframes glitch-animation {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
    </style>
</head>
<body>
    <div id="content">
        <h3>Niklas Lissjos</h3>
        this site is not broken, it's just glitchy by design
    </div>
    <script>
        function createGlitch(intense = false) {
            const glitch = document.createElement('div');
            glitch.className = 'glitch' + (intense ? ' glitch-intense' : '');
            glitch.style.top = Math.random() * window.innerHeight + 'px';
            document.body.appendChild(glitch);
            
            setTimeout(() => {
                document.body.removeChild(glitch);
            }, 200);
        }

        function simulateBadConnection() {
            const glitchCount = Math.floor(Math.random() * 3) + 1; // 1 to 3 glitches at a time
            for (let i = 0; i < glitchCount; i++) {
                createGlitch(Math.random() < 0.3); // 30% chance of intense glitch
            }
            const nextGlitch = Math.random() * 500 + 100; // Random time between 0.1 and 0.6 seconds
            setTimeout(simulateBadConnection, nextGlitch);
        }

        simulateBadConnection();


        // NASA POWER API call and update
        async function updateSolarRadiation() {
                    const lat = 59.3293; // Stockholm latitude
                    const lon = 18.0686; // Stockholm longitude
                    const start = new Date().toISOString().split('T')[0]; // Today's date
                    const end = start; // Same as start for single day
                    const parameters = 'ALLSKY_SFC_SW_DWN'; // All Sky Surface Shortwave Downward Irradiance
                    const apiUrl = `https://power.larc.nasa.gov/api/temporal/daily/point?parameters=${parameters}&community=RE&longitude=${lon}&latitude=${lat}&start=${start}&end=${end}&format=JSON`;

                    try {
                        const response = await fetch(apiUrl);
                        const data = await response.json();
                        const radiationValue = data.properties.parameter[parameters][start];
                        document.getElementById('radiation-value').textContent = (radiationValue / 1000).toFixed(3); // Convert W/m² to kW/m²
                    } catch (error) {
                        console.error('Error fetching solar radiation data:', error);
                        document.getElementById('radiation-value').textContent = 'unavailable';
                    }
                    
                    // Update every hour (3600000 ms)
                    setTimeout(updateSolarRadiation, 3600000);
                }





    </script>
</body>
</html>